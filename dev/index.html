<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Introduction · ImageAxes</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ImageAxes</span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Introduction</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Installation-1"><span>Installation</span></a></li><li class="toplevel"><a class="tocitem" href="#Usage-1"><span>Usage</span></a></li><li><a class="tocitem" href="#Names-and-locations-1"><span>Names and locations</span></a></li><li><a class="tocitem" href="#Temporal-axes-1"><span>Temporal axes</span></a></li><li><a class="tocitem" href="#StreamingContainer-1"><span>StreamingContainer</span></a></li></ul></li><li><a class="tocitem" href="reference/">API reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Introduction</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Introduction</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaImages/ImageAxes.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Introduction-1"><a class="docs-heading-anchor" href="#Introduction-1">Introduction</a><a class="docs-heading-anchor-permalink" href="#Introduction-1" title="Permalink"></a></h1><p>While images can often be represented as plain <code>Array</code>s, sometimes additional information about the &quot;meaning&quot; of each axis of the array is needed.  For example, in a 3-dimensional MRI scan, the voxels may not have the same spacing along the z-axis that they do along the x- and y-axes, and this fact should be accounted for during the display and/or analysis of such images.  Likewise, a movie has two spatial axes and one temporal axis; this fact may be relevant for how one performs image processing.</p><p>This package combines features from <a href="https://github.com/JuliaArrays/AxisArrays.jl">AxisArrays</a> and <a href="https://github.com/mauro3/SimpleTraits.jl">SimpleTraits</a> to provide a convenient representation and programming paradigm for dealing with such images.</p><h1 id="Installation-1"><a class="docs-heading-anchor" href="#Installation-1">Installation</a><a class="docs-heading-anchor-permalink" href="#Installation-1" title="Permalink"></a></h1><pre><code class="language-jl">Pkg.add(&quot;ImageAxes&quot;)</code></pre><h1 id="Usage-1"><a class="docs-heading-anchor" href="#Usage-1">Usage</a><a class="docs-heading-anchor-permalink" href="#Usage-1" title="Permalink"></a></h1><h2 id="Names-and-locations-1"><a class="docs-heading-anchor" href="#Names-and-locations-1">Names and locations</a><a class="docs-heading-anchor-permalink" href="#Names-and-locations-1" title="Permalink"></a></h2><p>The simplest thing you can do is to provide names to your image axes:</p><pre><code class="language-julia">using ImageAxes
img = AxisArray(reshape(1:192, (8,8,3)), :x, :y, :z)</code></pre><pre><code class="language-none">3-dimensional AxisArray{Int64,3,...} with axes:
    :x, Base.OneTo(8)
    :y, Base.OneTo(8)
    :z, Base.OneTo(3)
And data, a 8×8×3 reshape(::UnitRange{Int64}, 8, 8, 3) with eltype Int64:
[:, :, 1] =
 1   9  17  25  33  41  49  57
 2  10  18  26  34  42  50  58
 3  11  19  27  35  43  51  59
 4  12  20  28  36  44  52  60
 5  13  21  29  37  45  53  61
 6  14  22  30  38  46  54  62
 7  15  23  31  39  47  55  63
 8  16  24  32  40  48  56  64

[:, :, 2] =
 65  73  81  89   97  105  113  121
 66  74  82  90   98  106  114  122
 67  75  83  91   99  107  115  123
 68  76  84  92  100  108  116  124
 69  77  85  93  101  109  117  125
 70  78  86  94  102  110  118  126
 71  79  87  95  103  111  119  127
 72  80  88  96  104  112  120  128

[:, :, 3] =
 129  137  145  153  161  169  177  185
 130  138  146  154  162  170  178  186
 131  139  147  155  163  171  179  187
 132  140  148  156  164  172  180  188
 133  141  149  157  165  173  181  189
 134  142  150  158  166  174  182  190
 135  143  151  159  167  175  183  191
 136  144  152  160  168  176  184  192</code></pre><p>As described in more detail in the <a href="https://github.com/JuliaArrays/AxisArrays.jl">AxisArrays documentation</a>, you can now take slices like this:</p><pre><code class="language-julia">sl = img[Axis{:z}(2)]
sl = img[z=2]    # with AxisArrays 0.4.2 or higher</code></pre><pre><code class="language-none">2-dimensional AxisArray{Int64,2,...} with axes:
    :x, Base.OneTo(8)
    :y, Base.OneTo(8)
And data, a 8×8 Array{Int64,2}:
 65  73  81  89   97  105  113  121
 66  74  82  90   98  106  114  122
 67  75  83  91   99  107  115  123
 68  76  84  92  100  108  116  124
 69  77  85  93  101  109  117  125
 70  78  86  94  102  110  118  126
 71  79  87  95  103  111  119  127
 72  80  88  96  104  112  120  128</code></pre><p>You can also give units to the axes:</p><pre><code class="language-julia">using ImageAxes, Unitful
const mm = u&quot;mm&quot;
img = AxisArray(reshape(1:192, (8,8,3)),
                Axis{:x}(1mm:1mm:8mm),
                Axis{:y}(1mm:1mm:8mm),
                Axis{:z}(2mm:3mm:8mm))</code></pre><pre><code class="language-none">3-dimensional AxisArray{Int64,3,...} with axes:
    :x, (1:8) mm
    :y, (1:8) mm
    :z, (2:3:8) mm
And data, a 8×8×3 reshape(::UnitRange{Int64}, 8, 8, 3) with eltype Int64:
[:, :, 1] =
 1   9  17  25  33  41  49  57
 2  10  18  26  34  42  50  58
 3  11  19  27  35  43  51  59
 4  12  20  28  36  44  52  60
 5  13  21  29  37  45  53  61
 6  14  22  30  38  46  54  62
 7  15  23  31  39  47  55  63
 8  16  24  32  40  48  56  64

[:, :, 2] =
 65  73  81  89   97  105  113  121
 66  74  82  90   98  106  114  122
 67  75  83  91   99  107  115  123
 68  76  84  92  100  108  116  124
 69  77  85  93  101  109  117  125
 70  78  86  94  102  110  118  126
 71  79  87  95  103  111  119  127
 72  80  88  96  104  112  120  128

[:, :, 3] =
 129  137  145  153  161  169  177  185
 130  138  146  154  162  170  178  186
 131  139  147  155  163  171  179  187
 132  140  148  156  164  172  180  188
 133  141  149  157  165  173  181  189
 134  142  150  158  166  174  182  190
 135  143  151  159  167  175  183  191
 136  144  152  160  168  176  184  192</code></pre><p>which specifies that <code>x</code> and <code>y</code> have spacing of 1mm and <code>z</code> has a spacing of 3mm, as well as the location of the center of each voxel.</p><h2 id="Temporal-axes-1"><a class="docs-heading-anchor" href="#Temporal-axes-1">Temporal axes</a><a class="docs-heading-anchor-permalink" href="#Temporal-axes-1" title="Permalink"></a></h2><p>Any array possessing an axis <code>Axis{:time}</code> will be recognized as having a temporal dimension.  Given an array <code>A</code>,</p><pre><code class="language-julia">using ImageAxes, Unitful
const s = u&quot;s&quot;
img = AxisArray(reshape(1:9*300, (3,3,300)),
                Axis{:x}(1:3),
                Axis{:y}(1:3),
                Axis{:time}(1s/30:1s/30:10s))</code></pre><pre><code class="language-none">3-dimensional AxisArray{Int64,3,...} with axes:
    :x, 1:3
    :y, 1:3
    :time, (0.03333333333333333:0.03333333333333333:10.0) s
And data, a 3×3×300 reshape(::UnitRange{Int64}, 3, 3, 300) with eltype Int64:
[:, :, 1] =
 1  4  7
 2  5  8
 3  6  9

[:, :, 2] =
 10  13  16
 11  14  17
 12  15  18

[:, :, 3] =
 19  22  25
 20  23  26
 21  24  27

...

[:, :, 298] =
 2674  2677  2680
 2675  2678  2681
 2676  2679  2682

[:, :, 299] =
 2683  2686  2689
 2684  2687  2690
 2685  2688  2691

[:, :, 300] =
 2692  2695  2698
 2693  2696  2699
 2694  2697  2700</code></pre><p>you can retrieve its temporal axis with</p><pre><code class="language-julia">ax = timeaxis(img)</code></pre><pre><code class="language-none">Axis{:time,StepRangeLen{Unitful.Quantity{Float64,𝐓,Unitful.FreeUnits{(s,),𝐓,nothing}},Base.TwicePrecision{Unitful.Quantity{Float64,𝐓,Unitful.FreeUnits{(s,),𝐓,nothing}}},Base.TwicePrecision{Unitful.Quantity{Float64,𝐓,Unitful.FreeUnits{(s,),𝐓,nothing}}}}}((0.03333333333333333:0.03333333333333333:10.0) s)</code></pre><p>and index it like</p><pre><code class="language-julia">img[ax(4)]  # returns the 4th &quot;timeslice&quot;</code></pre><pre><code class="language-none">2-dimensional AxisArray{Int64,2,...} with axes:
    :x, 1:3
    :y, 1:3
And data, a 3×3 Array{Int64,2}:
 28  31  34
 29  32  35
 30  33  36</code></pre><p>You can also specialize methods like this:</p><pre><code class="language-julia">using ImageAxes, SimpleTraits
@traitfn nimages(img::AA) where {AA&lt;:AxisArray;  HasTimeAxis{AA}} = length(timeaxis(img))
@traitfn nimages(img::AA) where {AA&lt;:AxisArray; !HasTimeAxis{AA}} = 1</code></pre><pre><code class="language-none">nimages (generic function with 3 methods)</code></pre><p>where the pre-defined <code>HasTimeAxis</code> trait will restrict that method to arrays that have a timeaxis. A more complex example is</p><pre><code class="language-julia">using ImageAxes, SimpleTraits
@traitfn meanintensity(img::AA) where {AA&lt;:AxisArray; !HasTimeAxis{AA}} = mean(img)
@traitfn function meanintensity(img::AA) where {AA&lt;:AxisArray; HasTimeAxis{AA}}
    ax = timeaxis(img)
    n = length(x)
    intensity = zeros(eltype(img), n)
    for ti = 1:n
        sl = img[ax[ti]]  # the image slice at time ax[ti]
        intensity[ti] = mean(sl)
    end
    intensity
end</code></pre><p>and, when appropriate, it will return the mean intensity at each timeslice.</p><h3 id="Custom-temporal-axes-1"><a class="docs-heading-anchor" href="#Custom-temporal-axes-1">Custom temporal axes</a><a class="docs-heading-anchor-permalink" href="#Custom-temporal-axes-1" title="Permalink"></a></h3><p>Using <code>SimpleTraits</code>&#39;s <code>@traitimpl</code>, you can add <code>Axis{:t}</code> or <code>Axis{:scantime}</code> or any other name to the list of axes that have a temporal dimension:</p><pre><code class="language-julia">using ImageAxes, SimpleTraits
@traitimpl TimeAxis{Axis{:t}}</code></pre><p>Note this declaration affects all arrays throughout your entire session.  Moreover, it should be made before calling any functions on array-types that possess such axes; a convenient place to do this is right after you say <code>using ImageAxes</code> in your top-level script.</p><h2 id="StreamingContainer-1"><a class="docs-heading-anchor" href="#StreamingContainer-1">StreamingContainer</a><a class="docs-heading-anchor-permalink" href="#StreamingContainer-1" title="Permalink"></a></h2><p>ImageAxes implements a non-AbstractArray type <a href="reference/#ImageAxes.StreamingContainer"><code>StreamingContainer</code></a> for handling streaming media or computationally-generated images. It provides much of the interface of AbstractArrays without the implicit promise of random access or efficient indexing for all axes.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="reference/">API reference »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 10 December 2020 06:01">Thursday 10 December 2020</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
